{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Pro/Desktop/cours HTML CSS/sitr b2B/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Pro/Desktop/cours HTML CSS/sitr b2B/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import StripeCheckout from'react-stripe-checkout';import{jsx as _jsx}from\"react/jsx-runtime\";var Paiement=function Paiement(_ref){var panier=_ref.panier;var handlePayment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/paiement',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token:token.id,panier:panier})});case 3:response=_context.sent;if(response.ok){window.location.href='/paiement/succes';}else{alert('Erreur de paiement');}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alert('Erreur de paiement',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function handlePayment(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(StripeCheckout,{token:handlePayment,stripeKey:\"pk_live_51N7c9qExy3d78d8RirH1wR9yYPpRxDgjXrwE1wKaWTDkdFMUzhkYGR4f6nLRopOR8QZDuQSpOCNQTJRC0aIBwQb300wvnOnuAB\",amount:panier.reduce(function(acc,article){return acc+article.nbr*article.prix;},0)*100// Montant en centimes (10 €)\n,currency:\"EUR\",email:true,name:\"Vous y \\xEAtes presque!\",shippingAddress:true,children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"boutton_continuer\",children:\"Payer\"})});};export default Paiement;","map":{"version":3,"names":["React","StripeCheckout","jsx","_jsx","Paiement","_ref","panier","handlePayment","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","token","response","wrap","_callee$","_context","prev","next","fetch","method","headers","body","JSON","stringify","id","sent","ok","window","location","href","alert","t0","stop","_x","apply","arguments","stripeKey","amount","reduce","acc","article","nbr","prix","currency","email","name","shippingAddress","children","type","className"],"sources":["C:/Users/Pro/Desktop/cours HTML CSS/sitr b2B/front-end/src/boutique/Panier/Formulaire/Paiement/Paiement.js"],"sourcesContent":["import React from 'react';\r\nimport StripeCheckout from 'react-stripe-checkout';\r\n\r\nconst Paiement = ({panier}) => {\r\n  const handlePayment = async (token) => {\r\n    try {\r\n      const response = await fetch('/paiement', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ token: token.id, panier }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        window.location.href = '/paiement/succes';\r\n      } else {\r\n        alert('Erreur de paiement');\r\n      }\r\n    } catch (error) {\r\n      alert('Erreur de paiement', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <StripeCheckout\r\n      token={handlePayment}\r\n      stripeKey=\"pk_live_51N7c9qExy3d78d8RirH1wR9yYPpRxDgjXrwE1wKaWTDkdFMUzhkYGR4f6nLRopOR8QZDuQSpOCNQTJRC0aIBwQb300wvnOnuAB\"\r\n      amount={panier.reduce(\r\n        (acc, article) => acc + article.nbr * article.prix,\r\n        0)*100} // Montant en centimes (10 €)\r\n      currency=\"EUR\"\r\n      email\r\n      name=\"Vous y êtes presque!\"\r\n      shippingAddress\r\n    >\r\n      <button type=\"button\" className='boutton_continuer'>Payer</button>\r\n    </StripeCheckout>\r\n  );\r\n};\r\n\r\nexport default Paiement;"],"mappings":"wSAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,cAAc,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnD,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAAiB,IAAZ,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CACvB,GAAM,CAAAC,aAAa,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,KAAK,MAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEP,CAAAC,KAAK,CAAC,WAAW,CAAE,CACxCC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEZ,KAAK,CAAEA,KAAK,CAACa,EAAE,CAAEpB,MAAM,CAANA,MAAO,CAAC,CAClD,CAAC,CAAC,QANIQ,QAAQ,CAAAG,QAAA,CAAAU,IAAA,CAQd,GAAIb,QAAQ,CAACc,EAAE,CAAE,CACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,kBAAkB,CAC3C,CAAC,IAAM,CACLC,KAAK,CAAC,oBAAoB,CAAC,CAC7B,CAACf,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAgB,EAAA,CAAAhB,QAAA,aAEDe,KAAK,CAAC,oBAAoB,CAAAf,QAAA,CAAAgB,EAAO,CAAC,CAAC,yBAAAhB,QAAA,CAAAiB,IAAA,MAAAtB,OAAA,gBAEtC,kBAlBK,CAAAL,aAAaA,CAAA4B,EAAA,SAAA3B,KAAA,CAAA4B,KAAA,MAAAC,SAAA,OAkBlB,CAED,mBACElC,IAAA,CAACF,cAAc,EACbY,KAAK,CAAEN,aAAc,CACrB+B,SAAS,CAAC,6GAA6G,CACvHC,MAAM,CAAEjC,MAAM,CAACkC,MAAM,CACnB,SAACC,GAAG,CAAEC,OAAO,QAAK,CAAAD,GAAG,CAAGC,OAAO,CAACC,GAAG,CAAGD,OAAO,CAACE,IAAI,GAClD,CAAC,CAAC,CAAC,GAAK;AAAA,CACVC,QAAQ,CAAC,KAAK,CACdC,KAAK,MACLC,IAAI,CAAC,yBAAsB,CAC3BC,eAAe,MAAAC,QAAA,cAEf9C,IAAA,WAAQ+C,IAAI,CAAC,QAAQ,CAACC,SAAS,CAAC,mBAAmB,CAAAF,QAAA,CAAC,OAAK,CAAQ,CAAC,CACpD,CAAC,CAErB,CAAC,CAED,cAAe,CAAA7C,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}